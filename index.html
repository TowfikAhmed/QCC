<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0"
		/>
		<title>Quranic Solutions</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
		<script>
			tailwind.config = {
				theme: {
					extend: {
						colors: {
							primary: {
								50: "#f0f9ff",
								100: "#e0f2fe",
								500: "#0ea5e9",
								600: "#0284c7",
								700: "#0369a1",
								800: "#075985",
								900: "#0c4a6e",
							},
							islamic: {
								50: "#f8fafc",
								100: "#f1f5f9",
								200: "#e2e8f0",
								300: "#cbd5e1",
								400: "#94a3b8",
								500: "#64748b",
								600: "#475569",
								700: "#334155",
								800: "#1e293b",
								900: "#0f172a",
							},
						},
						fontFamily: {
							arabic: ["Amiri", "serif"],
						},
						animation: {
							"fade-in": "fadeIn 0.3s ease-in-out",
							"slide-up": "slideUp 0.3s ease-out",
							"bounce-gentle": "bounceGentle 0.6s ease-in-out",
						},
						keyframes: {
							fadeIn: {
								"0%": { opacity: "0" },
								"100%": { opacity: "1" },
							},
							slideUp: {
								"0%": { transform: "translateY(10px)", opacity: "0" },
								"100%": { transform: "translateY(0)", opacity: "1" },
							},
							bounceGentle: {
								"0%, 100%": { transform: "translateY(0)" },
								"50%": { transform: "translateY(-5px)" },
							},
						},
					},
				},
			};
		</script>
		<link
			rel="preconnect"
			href="https://fonts.googleapis.com"
		/>
		<link
			rel="preconnect"
			href="https://fonts.gstatic.com"
			crossorigin
		/>
		<link
			href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Inter:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
		/>
		<style>
			body {
				font-family: "Inter", system-ui, -apple-system, sans-serif;
				background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
			}
			.glass-effect {
				background: rgba(255, 255, 255, 0.25);
				backdrop-filter: blur(10px);
				border: 1px solid rgba(255, 255, 255, 0.18);
			}
			.card-hover {
				transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			}
			.card-hover:hover {
				transform: translateY(-4px);
				box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
					0 10px 10px -5px rgba(0, 0, 0, 0.04);
			}
			.search-focus:focus {
				box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
			}
			.modal-backdrop {
				background: rgba(15, 23, 42, 0.8);
				backdrop-filter: blur(4px);
			}
			.ayah-card {
				background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
				border-left: 4px solid #0ea5e9;
			}
			.category-header {
				background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
				background-clip: text;
			}
			.scroll-smooth {
				scroll-behavior: smooth;
			}
			.custom-scrollbar::-webkit-scrollbar {
				width: 6px;
			}
			.custom-scrollbar::-webkit-scrollbar-track {
				background: #f1f5f9;
				border-radius: 3px;
			}
			.custom-scrollbar::-webkit-scrollbar-thumb {
				background: #cbd5e1;
				border-radius: 3px;
			}
			.custom-scrollbar::-webkit-scrollbar-thumb:hover {
				background: #94a3b8;
			}
		</style>
	</head>
	<body class="bg-gray-100">
		<div
			id="app"
			class="min-h-screen"
		>
			<!-- Navigation Header -->
			<nav class="sticky top-0 z-40 glass-effect border-b border-white/20">
				<div class="max-w-7xl mx-auto px-4 py-4">
					<div class="flex items-center justify-between">
						<div class="flex items-center space-x-3">
							<div
								class="w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-700 rounded-full flex items-center justify-center"
							>
								<svg
									class="w-6 h-6 text-white"
									fill="currentColor"
									viewBox="0 0 24 24"
								>
									<path
										d="M12 2L2 7v10c0 5.55 3.84 9.71 9 11 5.16-1.29 9-5.45 9-11V7l-10-5z"
									/>
								</svg>
							</div>
							<div>
								<h1
									class="text-2xl font-bold bg-gradient-to-r from-islamic-800 to-primary-600 bg-clip-text text-transparent"
								>
									Quranic Solutions
								</h1>
								<p class="text-sm text-islamic-500">
									Sacred guidance for modern life
								</p>
							</div>
						</div>

						<!-- Mobile menu button -->
						<button
							class="lg:hidden p-2 rounded-md hover:bg-white/10 transition-colors"
						>
							<svg
								class="w-6 h-6 text-islamic-600"
								fill="none"
								stroke="currentColor"
								viewBox="0 0 24 24"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M4 6h16M4 12h16M4 18h16"
								/>
							</svg>
						</button>
					</div>
				</div>
			</nav>

			<div class="container mx-auto px-4 py-8 max-w-7xl">
				<!-- Search and Filters Section -->
				<div class="mb-12">
					<div
						class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 lg:p-8 border border-white/20"
					>
						<!-- Search Input -->
						<div class="mb-6">
							<label
								for="search"
								class="block text-sm font-semibold text-islamic-700 mb-3"
							>
								<svg
									class="w-4 h-4 inline mr-2"
									fill="none"
									stroke="currentColor"
									viewBox="0 0 24 24"
								>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
									/>
								</svg>
								Search Solutions
							</label>
							<div class="relative">
								<input
									type="text"
									id="search"
									v-model="searchText"
									placeholder="Search for guidance on faith, justice, family, patience..."
									class="w-full pl-4 pr-12 py-4 text-base border-2 border-islamic-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-300 search-focus bg-white/90"
								/>
								<button
									v-if="searchText"
									@click="clearSearch"
									class="absolute inset-y-0 right-0 pr-4 flex items-center hover:bg-islamic-50 rounded-r-xl transition-colors"
								>
									<svg
										class="h-5 w-5 text-islamic-400 hover:text-islamic-600"
										viewBox="0 0 20 20"
										fill="currentColor"
									>
										<path
											fill-rule="evenodd"
											d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
											clip-rule="evenodd"
										/>
									</svg>
								</button>
								<div
									v-if="!searchText"
									class="absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none"
								>
									<svg
										class="h-5 w-5 text-islamic-300"
										fill="none"
										stroke="currentColor"
										viewBox="0 0 24 24"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
										/>
									</svg>
								</div>
							</div>
						</div>

						<!-- Filters Row -->
						<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
							<div>
								<label
									for="languages"
									class="block text-sm font-semibold text-islamic-700 mb-3"
								>
									<svg
										class="w-4 h-4 inline mr-2"
										fill="none"
										stroke="currentColor"
										viewBox="0 0 24 24"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"
										/>
									</svg>
									Language
								</label>
								<select
									id="languages"
									v-model="selectedLanguage"
									class="capitalize w-full pl-4 pr-10 py-4 text-base border-2 border-islamic-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-300 bg-white/90 cursor-pointer"
								>
									<option value="">All Languages</option>
									<option
										v-for="language in languages"
										:value="language"
										class="capitalize"
									>
										{{ language }}
									</option>
								</select>
							</div>
							<div>
								<label
									for="editions"
									class="block text-sm font-semibold text-islamic-700 mb-3"
								>
									<svg
										class="w-4 h-4 inline mr-2"
										fill="none"
										stroke="currentColor"
										viewBox="0 0 24 24"
									>
										<path
											stroke-linecap="round"
											stroke-linejoin="round"
											stroke-width="2"
											d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
										/>
									</svg>
									Edition
								</label>
								<select
									id="editions"
									v-model="selectedEdition"
									class="w-full pl-4 pr-10 py-4 text-base border-2 border-islamic-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-300 bg-white/90 cursor-pointer"
								>
									<option
										v-for="edition in editions"
										:value="edition.identifier"
									>
										{{ edition.englishName }}
									</option>
								</select>
							</div>
						</div>
					</div>
				</div>

				<!-- Categories and Solutions -->
				<div
					v-for="(category, categoryName) in filteredQuranicSolutions"
					:key="categoryName"
					class="mb-16 animate-slide-up"
				>
					<div class="mb-8">
						<h2 class="text-3xl lg:text-4xl font-bold category-header mb-3">
							{{ categoryName }}
						</h2>
						<div
							class="w-24 h-1 bg-gradient-to-r from-primary-500 to-primary-700 rounded-full"
						></div>
					</div>

					<div
						class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 lg:gap-8"
					>
						<div
							v-for="(solution, solutionName) in category"
							:key="solutionName"
							class="bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg p-6 lg:p-8 border border-white/30 card-hover animate-fade-in"
						>
							<div class="flex items-start justify-between mb-4">
								<h3
									class="text-xl lg:text-2xl font-bold text-islamic-800 flex-1"
								>
									{{ solutionName }}
								</h3>
								<div
									class="w-8 h-8 bg-gradient-to-br from-primary-100 to-primary-200 rounded-full flex items-center justify-center ml-3 flex-shrink-0"
								>
									<svg
										class="w-4 h-4 text-primary-600"
										fill="currentColor"
										viewBox="0 0 24 24"
									>
										<path
											d="M12 2L2 7v10c0 5.55 3.84 9.71 9 11 5.16-1.29 9-5.45 9-11V7l-10-5z"
										/>
									</svg>
								</div>
							</div>

							<p class="text-islamic-600 mb-6 leading-relaxed">
								{{ solution.Summary }}
							</p>

							<div class="space-y-4">
								<div
									v-for="example in solution.Examples"
									:key="example.text || example"
								>
									<div
										v-if="example.surah"
										class="ayah-card p-4 lg:p-6 rounded-xl shadow-sm hover:shadow-md transition-all duration-300"
									>
										<div class="flex items-center justify-between mb-3">
											<p
												class="font-bold text-islamic-700 text-sm lg:text-base"
											>
												{{ example.surah }}
											</p>
											<span
												class="text-xs lg:text-sm text-primary-600 bg-primary-50 px-2 py-1 rounded-full font-medium"
											>
												{{ example.surah_number }}:{{ example.ayah_range }}
											</span>
										</div>
										<p
											class="text-sm lg:text-base text-islamic-600 mb-4 leading-relaxed italic"
										>
											"{{ example.text }}"
										</p>
										<button
											@click="getAyahs(example.surah_number, example.ayah_range)"
											class="group w-full bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-semibold py-3 px-4 rounded-xl transition-all duration-300 flex items-center justify-center space-x-2 animate-bounce-gentle"
										>
											<span>Read Full Verses</span>
											<svg
												class="w-4 h-4 group-hover:translate-x-1 transition-transform"
												fill="none"
												stroke="currentColor"
												viewBox="0 0 24 24"
											>
												<path
													stroke-linecap="round"
													stroke-linejoin="round"
													stroke-width="2"
													d="M9 5l7 7-7 7"
												/>
											</svg>
										</button>
									</div>
									<div
										v-else
										class="text-islamic-600 bg-islamic-50 p-4 rounded-xl border-l-4 border-islamic-200"
									>
										{{ example }}
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Loading Overlay -->
			<div
				v-if="loading"
				class="fixed inset-0 modal-backdrop flex items-center justify-center z-50"
			>
				<div class="bg-white rounded-2xl p-8 shadow-2xl animate-bounce-gentle">
					<div class="flex items-center space-x-4">
						<div
							class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"
						></div>
						<span class="text-islamic-800 text-xl font-semibold"
							>Loading...</span
						>
					</div>
				</div>
			</div>

			<!-- Modal for Ayahs -->
			<div
				v-if="ayahs.length > 0"
				class="fixed inset-0 modal-backdrop flex items-center justify-center z-50 p-4"
				@click="closeModal"
			>
				<div
					class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-slide-up"
					@click.stop
				>
					<!-- Modal Header -->
					<div
						class="flex items-center justify-between p-6 lg:p-8 border-b border-islamic-100"
					>
						<div>
							<h2 class="text-2xl lg:text-3xl font-bold text-islamic-800">
								Quran {{currentSurah.surahNumber}} :
								<span v-if="showFullSurah">1-{{ayahs.length}}</span>
								<span v-else>{{currentSurah.ayahRange}}</span>
							</h2>
							<p class="text-islamic-600 mt-1">{{ selectedEditionName }}</p>
						</div>
						<button
							@click="closeModal"
							class="p-2 hover:bg-islamic-50 rounded-full transition-colors"
						>
							<svg
								class="w-6 h-6 text-islamic-500"
								fill="none"
								stroke="currentColor"
								viewBox="0 0 24 24"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M6 18L18 6M6 6l12 12"
								/>
							</svg>
						</button>
					</div>

					<!-- Modal Filters -->
					<div class="p-6 lg:p-8 border-b border-islamic-100 bg-islamic-25">
						<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
							<div>
								<label
									for="modal-languages"
									class="block text-sm font-semibold text-islamic-700 mb-2"
								>
									Language
								</label>
								<select
									id="modal-languages"
									v-model="selectedLanguage"
									class="w-full pl-4 pr-10 py-3 text-base border-2 border-islamic-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-300 bg-white"
								>
									<option value="">All Languages</option>
									<option
										v-for="language in languages"
										:value="language"
									>
										{{ language }}
									</option>
								</select>
							</div>
							<div>
								<label
									for="modal-editions"
									class="block text-sm font-semibold text-islamic-700 mb-2"
								>
									Edition
								</label>
								<select
									id="modal-editions"
									v-model="selectedEdition"
									@change="onEditionChangeInModal"
									class="w-full pl-4 pr-10 py-3 text-base border-2 border-islamic-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-300 bg-white"
								>
									<option
										v-for="edition in editions"
										:value="edition.identifier"
									>
										{{ edition.englishName }}
									</option>
								</select>
							</div>
						</div>

						<div class="text-center mt-6">
							<button
								@click="showFullSurah = true"
								v-if="!showFullSurah"
								class="bg-gradient-to-r from-islamic-600 to-islamic-700 hover:from-islamic-700 hover:to-islamic-800 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300"
							>
								Read Complete Surah
							</button>
						</div>
					</div>

					<!-- Modal Content -->
					<div class="flex-1 overflow-x-hidden">
						<div
							class="p-6 lg:p-8 h-full overflow-y-auto custom-scrollbar scroll-smooth"
						>
							<div class="space-y-6">
								<div
									v-for="ayah in displayedAyahs"
									:key="ayah.number"
									class="ayah-card p-6 rounded-xl shadow-sm hover:shadow-md transition-all duration-300 animate-fade-in"
								>
									<div class="flex items-start space-x-4">
										<div
											class="w-8 h-8 bg-gradient-to-br from-primary-500 to-primary-600 rounded-full flex items-center justify-center flex-shrink-0"
										>
											<span class="text-white font-bold text-sm"
												>{{ ayah.numberInSurah }}</span
											>
										</div>
										<p
											class="text-lg lg:text-xl text-islamic-800 leading-relaxed flex-1"
										>
											{{ ayah.text }}
										</p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Error Toast -->
			<div
				v-if="error"
				class="fixed bottom-4 right-4 bg-red-500 text-white py-4 px-6 rounded-xl shadow-lg animate-slide-up z-50"
			>
				<div class="flex items-center justify-between">
					<span class="font-medium">{{ error }}</span>
					<button
						@click="error = null"
						class="ml-4 p-1 hover:bg-red-600 rounded-full transition-colors"
					>
						<svg
							class="w-4 h-4"
							fill="none"
							stroke="currentColor"
							viewBox="0 0 24 24"
						>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-width="2"
								d="M6 18L18 6M6 6l12 12"
							/>
						</svg>
					</button>
				</div>
			</div>
		</div>

		<script>
			const { createApp } = Vue;

			createApp({
				data() {
					return {
						title: "Comprehensive Quranic Solutions Categorization",
						quranicSolutions: {},
						ayahs: [],
						loading: false,
						editions: [],
						selectedEdition:
							localStorage.getItem("selectedEdition") || "quran-uthmani",
						currentSurah: null,
						languages: [],
						selectedLanguage: localStorage.getItem("selectedLanguage") || "",
						searchText: "",
						error: null,
						showFullSurah: false,
					};
				},
				watch: {
					selectedLanguage(newLanguage) {
						localStorage.setItem("selectedLanguage", newLanguage);
						this.fetchEditions(newLanguage).then(() => {
							if (this.currentSurah) {
								this.getAyahs(
									this.currentSurah.surahNumber,
									this.currentSurah.ayahRange
								);
							}
						});
					},
					selectedEdition(newEdition) {
						localStorage.setItem("selectedEdition", newEdition);
					},
				},
				computed: {
					selectedEditionName() {
						const edition = this.editions.find(
							(e) => e.identifier === this.selectedEdition
						);
						return edition ? edition.englishName : this.selectedEdition;
					},
					filteredQuranicSolutions() {
						if (!this.searchText) {
							return this.quranicSolutions;
						}

						const search = this.searchText.toLowerCase();
						const result = {};

						for (const categoryName in this.quranicSolutions) {
							const category = this.quranicSolutions[categoryName];
							const filteredCategory = {};

							for (const solutionName in category) {
								const solution = category[solutionName];
								if (
									solutionName.toLowerCase().includes(search) ||
									solution.Summary.toLowerCase().includes(search)
								) {
									filteredCategory[solutionName] = solution;
								}
							}

							if (Object.keys(filteredCategory).length > 0) {
								result[categoryName] = filteredCategory;
							}
						}

						return result;
					},
					displayedAyahs() {
						if (this.showFullSurah || !this.currentSurah) {
							return this.ayahs;
						}
						const [start, end] = this.currentSurah.ayahRange
							.split("-")
							.map(Number);
						const offset = start - 1;
						const limit = end ? end - start + 1 : 1;
						return this.ayahs.slice(offset, offset + limit);
					},
				},
				mounted() {
					fetch("data.json")
						.then((response) => response.json())
						.then((data) => {
							this.quranicSolutions =
								data["Comprehensive Quranic Solutions Categorization"];
						})
						.catch((error) => {
							console.error("Error fetching data.json:", error);
							this.error = "Failed to load the solutions data.";
						});

					this.fetchLanguages();
					this.fetchEditions(this.selectedLanguage);
				},
				methods: {
					clearSearch() {
						this.searchText = "";
					},
					fetchLanguages() {
						return fetch("https://api.alquran.cloud/v1/edition/language")
							.then((response) => response.json())
							.then((data) => {
								this.languages = data.data;
							})
							.catch((error) => {
								console.error("Error fetching languages:", error);
								this.error = "Failed to fetch languages.";
							});
					},
					fetchEditions(language = "") {
						this.loading = true;
						let url = "https://api.alquran.cloud/v1/edition";
						if (language) {
							url = `https://api.alquran.cloud/v1/edition/language/${language}`;
						}
						return fetch(url)
							.then((response) => response.json())
							.then((data) => {
								this.editions = data.data;
								if (data.data.length > 0) {
									this.selectedEdition = data.data[0].identifier;
								}
								this.loading = false;
							})
							.catch((error) => {
								console.error("Error fetching editions:", error);
								this.error =
									"Failed to fetch editions. Please try again later.";
								this.loading = false;
							});
					},
					getAyahs(surahNumber, ayahRange) {
						this.loading = true;
						this.currentSurah = { surahNumber, ayahRange };
						this.showFullSurah = false;

						const storageKey = `surah_${surahNumber}_${this.selectedEdition}`;
						const cachedSurah = localStorage.getItem(storageKey);

						if (cachedSurah) {
							this.ayahs = JSON.parse(cachedSurah);
							this.loading = false;
						} else {
							fetch(
								`https://api.alquran.cloud/v1/surah/${surahNumber}/${this.selectedEdition}`
							)
								.then((response) => response.json())
								.then((data) => {
									if (data.data && data.data.ayahs) {
										this.ayahs = data.data.ayahs;
										localStorage.setItem(
											storageKey,
											JSON.stringify(this.ayahs)
										);
									}
									this.loading = false;
								})
								.catch((error) => {
									console.error("Error fetching ayahs:", error);
									this.error = "Failed to fetch ayahs. Please try again later.";
									this.loading = false;
								});
						}
					},
					closeModal() {
						this.ayahs = [];
						this.currentSurah = null;
					},
					onEditionChangeInModal() {
						if (this.currentSurah) {
							this.getAyahs(
								this.currentSurah.surahNumber,
								this.currentSurah.ayahRange
							);
						}
					},
				},
			}).mount("#app");
		</script>
	</body>
</html>
